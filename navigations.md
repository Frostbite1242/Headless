# Навігація

Перше, що ви захочете зробити з WebDriver, - це перейти за посиланням. Звичайний спосіб зробити це - викликати метод get:


  driver.get("http://www.google.com")

WebDriver зачекає, поки сторінка повністю завантажиться (тобто спрацювала подія завантаження), перш ніж повернути керування до тесту або сценарію.
Майте на увазі, що якщо ваша сторінка використовує багато AJAX під час завантаження, то WebDriver може не знати, коли вона повністю завантажилася. 
Якщо вам потрібно забезпечити повне завантаження таких сторінок, ви можете використовувати очікування.


# Взаємодія зі сторінкою


Просто можливість ходити по місцях не дуже корисно. Що б ми справді хотіли зробити, це взаємодіяти зі сторінками або, точніше, з елементами HTML на сторінці.
Перш за все, нам потрібно його знайти. WebDriver пропонує ряд способів пошуку елементів. Наприклад, заданий елемент, який визначається як:

    
    <input type="text" name="passwd" id="passwd-id" />
  
  
Ви можете знайти його за допомогою будь-якого з нижче перерахованих:
  

    element = driver.find_element_by_id("passwd-id")
    element = driver.find_element_by_name("passwd")
    element = driver.find_element_by_xpath("//input[@id='passwd-id']")
    element = driver.find_element_by_css_selector("input#passwd-id")



Ви також можете шукати посилання за його текстом, але будьте обережні! Текст повинен точно відповідати! Також слід бути обережним при використанні XPATH у WebDriver. Якщо є кілька елементів, що відповідають запиту, буде повернуто лише перший. Якщо нічого не вдається знайти, буде піднято NoSuchElementException.

WebDriver має API «на основі об’єктів»; ми представляємо всі типи елементів, використовуючи один і той же інтерфейс. Це означає, що, хоча ви можете побачити безліч можливих методів, які ви можете використати, натиснувши комбінацію клавіш автозаповнення IDE, не всі з них матимуть сенс або будуть дійсними. Не хвилюйся! WebDriver спробує зробити правильну справу, і якщо ви викликаєте метод, який не має сенсу (наприклад, «setSelected ()» для тегу «мета»), буде винятком.

Отже, у вас є елемент. Що ви можете з цим зробити? Перш за все, можливо, ви захочете ввести якийсь текст у текстове поле:


    element.send_keys("some text")
    
  Ви можете імітувати натискання клавіш зі стрілками, використовуючи клас «Клавіші»:
  
    element.send_keys(" and some", Keys.ARROW_DOWN)
  
Можна викликати send_keys на будь-якому елементі, що дозволяє тестувати комбінації клавіш, такі як ті, що використовуються на GMail. 
Побічним ефектом цього є те, що введення чогось у текстове поле не очистить це автоматично. 
Натомість те, що ви вводите, буде додано до того, що вже є. Ви можете легко очистити вміст текстового поля або текстового поля за допомогою методу clear:

      element.clear()

# Заповнення форм (змінити назву)


Ми вже бачили, як вводити текст у текстове поле або текстове поле, а як щодо інших елементів? Ви можете "перемикати" стан випадаючого списку,
а можете використовувати "setSelected", щоб встановити щось на зразок вибраного тегу OPTION. Робота з тегами SELECT не так вже й погана:

    element = driver.find_element_by_xpath("//select[@name='name']")
    all_options = element.find_elements_by_tag_name("option")
    for option in all_options:
        print("Value is: %s" % option.get_attribute("value"))
        option.click()
        
Це знайде перший елемент “ВИБІР” на сторінці та прокрутить по черзі кожну з його ВАРІАНТІВ, роздрукуючи їх значення та вибравши по черзі.

Як бачите, це не найефективніший спосіб роботи з елементами SELECT. Класи підтримки WebDriver включають клас, який називається "Вибрати", 
який надає корисні методи взаємодії з ними:

      from selenium.webdriver.support.ui import Select
      select = Select(driver.find_element_by_name('name'))
      select.select_by_index(index)
      select.select_by_visible_text("text")
      select.select_by_value(value)

WebDriver також надає функції для скасування вибору всіх вибраних параметрів:


      select = Select(driver.find_element_by_id('id'))
      select.deselect_all()

Це скасує вибір усіх ВАРІАНТІВ з цього конкретного SELECT на сторінці.

Припустимо, у тесті нам потрібен список усіх вибраних параметрів за замовчуванням. Клас Select надає метод властивості, який повертає список:

    select = Select(driver.find_element_by_xpath("//select[@name='name']"))
    all_selected_options = select.all_selected_options

Щоб отримати всі доступні варіанти:

      options = select.options

Закінчивши форму, ви, мабуть, захочете її надіслати. Одним із способів зробити це буде знайти кнопку «подати» та натиснути її:

      driver.find_element_by_id("submit").click()
      
Крім того, WebDriver має зручний метод «подати» для кожного елемента. Якщо ви викликаєте це для елемента у формі, WebDriver буде проходити по DOM, 
доки не знайде обгорткову форму, а потім викличе подання на цьому. Якщо елемент не у формі, буде піднято NoSuchElementException:

    element.submit()

# Drag and drop


Ви можете використовувати перетягування або переміщення елемента на певну величину, або перехід до іншого елемента:

      element = driver.find_element_by_name("source")
      target = driver.find_element_by_name("target")

      from selenium.webdriver import ActionChains
      action_chains = ActionChains(driver)
      action_chains.drag_and_drop(element, target).perform()

# Переміщення між вікнами та фреймами 

Рідко трапляється, що сучасний веб-додаток не має кадрів або обмежується одним вікном. 
WebDriver підтримує переміщення між іменованими вікнами за допомогою методу “switch_to_window”:


      driver.switch_to_window("windowName")
      
All calls to driver will now be interpreted as being directed to the particular window. 
But how do you know the window’s name? Take a look at the javascript or link that opened it:


      <a href="somewhere.html" target="windowName">Click here to open a new window</a>

Крім того, ви можете передати «дескриптор вікна» методу «switch_to_window ()». Знаючи це, можна перебирати кожне відкрите вікно так:

    for handle in driver.window_handles:
        driver.switch_to_window(handle)

Ви також можете переходити від фрейма до фрайма (або в фрейми):

      driver.switch_to_frame("frameName")
Можна отримати доступ до підкадрів, відокремивши шлях крапкою, і ви також можете вказати кадр за його індексом. Це:

    driver.switch_to_frame("frameName.0.child")

перейде до фрейму з назвою „child” першого підкадру кадру, який називається „frameName”. Усі кадри обчислюються як з * зверху *.

Після того, як ми закінчимо роботу з фреймами, нам доведеться повернутися до батьківського фрейму, який можна зробити за допомогою:

      driver.switch_to_default_content()
#Спливаюче діалогове вікно (Модальне вікно)


Selenium WebDriver має вбудовану підтримку для роботи зі спливаючими діалоговими вікнами. 
Після того, як ви ініціюєте дію, яка може відкрити спливаюче вікно, ви можете отримати доступ до сповіщення за допомогою наступного:

      alert = driver.switch_to.alert
Це поверне відкритий об’єкт попередження. За допомогою цього об’єкта ви тепер можете приймати, відхиляти, читати його вміст або навіть вводити запит. 
Цей інтерфейс однаково добре працює з попередженнями, підтвердженнями, підказками. Для отримання додаткової інформації зверніться до документації API.

# Навігація: історія та місцезнаходження

Раніше ми охоплювали перехід до сторінки за допомогою команди „отримати” (driver.get ("http://www.example.com")). 
Як ви вже бачили, WebDriver має ряд менших інтерфейсів, орієнтованих на завдання, і навігація є корисним завданням. 
Для переходу на сторінку можна скористатися методом get:


      driver.get("http://www.example.com")
      
      
Щоб рухатись вперед та назад в історії браузера:

      driver.forward()
      driver.back()
Зверніть увагу, що ця функціональність повністю залежить від основного драйвера. 
Цілком можливо, що при виклику цих методів може статися щось несподіване, якщо ви звикли до поведінки одного браузера над іншим.

# Cookies


 Перш за все, вам потрібно перебувати в домені, для якого файл cookie буде дійсним:
 

      driver.get("http://www.example.com")

      cookie = {‘name’ : ‘foo’, ‘value’ : ‘bar’}
      driver.add_cookie(cookie)

      driver.get_cookies()

# Вступ

### Що таке Headless тестування?

Headless тестування є запуск в браузері тесту на працездатність будь-яких складових UI без відображення цього самого UI.
Таке тестування запускає скрипти в браузері, але не запускає і не показує сам по собі UI.

Чому вам може знадобитися використовувати Headless-браузери? У цього підходу є безліч плюсів і мінусів. 
Використання headless браузера може бути не дуже корисним для серфінгу в мережі, але для автоматизації завдань і тестування він незамінний.

### Чому варто використовувати headless browser?

Слідувати за грошима - це кліше, проте я все ж вважаю, що це ключовий індикатор появи трендів, а отже того, на що обов'язково треба звернути увагу. 
Наприклад, Sauce Labs тільки що випустила новий сервіс під назвою Sauce Headless, хмарне рішення для headless тестування ваших рішень.

Я знаю, що люди в Sause - це розумні люди. Вони не будуть нічого розробляти просто так. Їм необхідно отримати зворотній зв'язок від користувачів, щоб зрозуміти,
що будь-якої функціонал є необхідним.

Я впевнений, що вони не будуть самотні в своєму прагненні розвивати headless тестування.
У міру того, як ми просуваємося далі по життєвому циклу розробки програмного забезпечення, тестувальникам необхідно швидше і швидше видавати зворотний зв'язок розробникам.
Один із способів цього домогтися - це проводити швидкі перевірки headless браузером.

### Автоматизація в розробці програмного забезпечення

Я всіма руками «за» автоматизацію, але автоматизація це не тільки про тестування.
Це історія про всі аспекти, які ви можете автоматизувати, щоб зберегти час або зусилля в життєвому циклі розробки програмного забезпечення,
контролю якості або тестування, DevOps або установки. Headless браузери є одним з потужних засобів автоматизації.

### Headless браузери швидше звичайних браузерів

Одне з найважливіших відмінностей headless браузерів від звичайних браузерів - це швидкість їх роботи. 
Справа в тому, що, коли ви завантажуєте сторінку в браузері без GUI, йому не потрібно витрачати час на завантаження CSS, JavaScript і рендеринг HTML.

Я б не сказав, що різниця буде колосальною, проте в деяких випадках можна простежити збільшення швидкості в два рази або навіть в 15. 
Таким чином, якщо вам важлива продуктивність, то headless браузер буде хорошим вибором.

### Скрапінг за допомогою headless браузера

Інша перевага headless браузерів полягає в їх здатності збирати дані з веб-сайтів. Щоб це зробити, вам не доведеться вручну запускати браузер. 
Ви можете використовувати headless технологію, щоб просто скрап HTML. І рендерить весь браузер зовсім не обов'язково.

Скажімо, що в вашому кейсі потрібно спортивна статистика або порівняння цін на різних сайтах.

Оскільки вам потрібні лише дані, не має сенсу запускати повноцінну сутність браузера і надмірно навантажувати машину, 
оскільки чим менше навантаження, тим швидше ви отримаєте результат. Це не обов'язково може бути тестування, 
просто вам потрібно використовувати правильний інструмент для роботи. Я взагалі вважаю, що тестувальники даремно недооцінюють headless браузери в своїй справі.

Таким чином, якщо вам потрібно отримати дані з веб-сторінки, її не потрібно відкривати і давати додаткове навантаження, 
відкриваючи браузер, весь необхідний функціонал в змозі забезпечити headless браузер.

### Моніторинг продуктивності за допомогою скриптів Headless браузера

Ще один варіант використання headless браузера - це моніторинг ефективності мережевих програм.

Деякі навіть використовують їх для автоматизації рендеринга і отримання скріншотів екрану веб-сайту, щоб проводити тестування розмітки в автоматизованому стилі.

Я думаю, це одна з причин, по якій Google розробив новий headless Chrome API, який називається Puppeteer. Він націлений в першу чергу на допомогу розробникам.

### Основні ідеї Headless браузер тестування

Крім попередньої ідеї, є також і інші варіанти використання headless браузерів, про які я вам зараз і розповім:

* Запускати тести на машині без монітора;
* Налаштування даних;
* Тестування SSL;
* Симуляція безлічі браузерів на одній машині;
* Запуск тестів на headless системі, як наприклад Linux без GUI;
* Отримання і візуалізація PDF-файлів;
* Тестування розмітки, оскільки headless браузери можуть рендерить HTML і CSS, як повноцінні браузери, відповідно ви можете тестувати ними стилі.


### Випадки, коли вам не захочеться використовувати Headless браузер

Звичайно ж, бувають випадки, коли вам може захотітися використовувати повноцінний браузер, замість headless браузера. наприклад:

- Вам потрібно імітувати реальних користувачів;
- Вам потрібно бачити, як відпрацьовує тест;
- Якщо вам потрібно проводити дебаг, це може бути складно з headless браузером.

### Популярні Headless браузери

* Google Puppeteer - Headless браузер Puppeteer це бібліотека Node. Він забезпечує високорівневе API для управління headless Chrome або Chromium за допомогою протоколу DevTools.
Його також можна налаштувати для використання повноцінного (non-headless) Chrome або Chromium.
Google Chrome з версії 59;
* Firefox версії 55 і 56;
* PhantomJS - headless webkit на JavaScript API. У нього є швидка і нативная підтримка для різних веб-стандартів: обробка DOM дерева, CSS селектори, формат JSON, Canvas і SVG. * Зараз він не підтримується. Через це вам може не захотітися його використовувати.
* HtmlUnit - це браузер без GUI під Java код. Він моделює HTML документи і надає API, який дозволяє відкривати сторінки, заповнювати форми, натискати на посилання і т.д. Також, як і в вашому «звичайному» браузері.
* Splinter - Splinter - це headless браузер, орієнтований на Python. Він має відкритий вихідний код і використовується для тестування веб-додатків з використанням Python. Наприклад, ви можете використовувати його для автоматизації дій браузера, таких як відвідування веб-сторінок і взаємодії з їх елементами.
* jBrowserDriver - Програмований, вбудований драйвер веб-браузера, сумісний з Selenium WebDriver spec - headless, заснований на WebKit, на чистій Java.


### Коли слід використовувати headless браузер для тестування?

Відповідь на це питання залежить від цілей вашого тестування.

З одного боку, люди часто говорять: «Ніколи не використовуйте headless браузери. Реальний користувач ніколи не буде ним користуватися, так чому ви повинні?
» Хоча, з іншого боку, ми чуємо: «Вам слід завжди використовувати headless браузер, оскільки він швидше, а швидше в питаннях тестування - значить, краще»

Як ми знаємо, у кожній позиції знайдуться прихильники і знайдеться опозиція, однак тут ставиться лише питання вибору правильного інструменти для вирішення тих чи інших завдань.

Пам'ятайте про те, що ви повинні використовувати оптимальний інструмент для роботи і завжди запитувати себе,
як це торкнеться кінцевого користувача, повинні питати себе, розповідає про мету тестування кожен раз, коли робите вибір між цими двома точками зору.


